{"version":3,"sources":["components/screens/Main/styles.module.css","config/battery.js","config/firebase.js","api/api.js","config/network.js","utils/index.js","contexts/dataContext.js","components/common/Battery/index.js","components/common/Header/index.js","components/Graph/index.js","components/Graph/TriggerGraph.js","components/screens/Settings/index.js","components/screens/Main/index.js","App.js","reportWebVitals.js","index.js","components/Graph/styles.module.css","styles.module.css","components/common/Header/style.module.css","components/common/Battery/styles.module.css","components/screens/Settings/styles.module.css"],"names":["module","exports","voltage","levels","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","API","axios","create","baseURL","withCredentials","getBatteryGraph","a","get","getTriggerGraph","getSettings","then","r","data","setSettings","firebase","auth","currentUser","getIdToken","token","prevSettings","put","signIn","password","signInWithEmailAndPassword","userCredential","user","catch","error","signOut","changePassword","updatePassword","spreadTriggersToDay","pairs","Array","fill","map","_","index","hour","value","forEach","time","getHour","getTotalPshicks","unit","todayWakeUps","filter","moment","isSame","reduce","total","timestamp","format","contextShape","plots","activations","currentState","lastPush","recentActivity","day","week","month","settings","activeTime","sleepTime","sprayInterval","startService","fetchData","fetchSettings","saveSettings","isFetching","DataContext","React","createContext","Battery","useContext","icon","faBatteryEmpty","faBatteryQuarter","faBatteryHalf","faBatteryThreeQuarters","faBatteryFull","className","styles","battery","color","style","now","calcDiff","diff","getDiff","join","Header","bar","barTitle","BatteryGraph","options","colors","chart","type","stacked","height","zoom","enabled","autoScaleYaxis","toolbar","autoSelected","tools","download","selection","zoomin","zoomout","pan","reset","customIcons","dataLabels","markers","size","title","text","align","fontFamily","fontWeight","yaxis","max","min","labels","formatter","val","toFixed","xaxis","categories","tooltip","shared","series","name","graphContainer","width","TriggerGraph","plotOptions","radar","polygons","strokeColor","opacity","stroke","show","dashArray","legend","Settings","isVisible","onClose","isSignedIn","useState","_settings","_setSettings","changePasswordState","setChangePasswordState","setPassword","passwordError","setPasswordError","newPasswordError","setNewPasswordError","one","two","newPasswords","setNewPasswords","onPasswordChange","length","resp","message","onSignIn","onSave","useEffect","cn","s","wrapper","settingsHeader","controllers","onClick","faTimes","section","inputArea","flex","placeholder","onChange","e","prev","target","faKey","faSignOutAlt","disabled","goBack","Card","gridArea","mainComponent","bottomText","onCLick","classNames","card","clickable","cardMainContent","cardBottomText","GraphCard","props","children","Main","displayModal","setDisplayModal","totalGrid","totalRow","totalTitle","totalValue","providerId","mainGrid","faCog","p","App","appData","setData","console","log","voltageData","activityData","voltageArray","Object","entries","slice","currentVoltage","activityArray","dailyActivitySpread","activityDay","activityWeek","activityMonth","state","Number","setInterval","useDataContext","apps","app","initializeApp","Provider","loadingOverlay","contentWrapper","body","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e2a5382c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainGrid\":\"styles_mainGrid__1mR3b\",\"card\":\"styles_card__4jqsg\",\"cardMainContent\":\"styles_cardMainContent__16FlH\",\"cardBottomText\":\"styles_cardBottomText__2q2-n\",\"clickable\":\"styles_clickable__14Tnt\",\"totalGrid\":\"styles_totalGrid__dD4zH\",\"totalRow\":\"styles_totalRow__1kBP_\",\"totalTitle\":\"styles_totalTitle__1Du8w\",\"totalValue\":\"styles_totalValue__3XFFk\"};","export const voltage = {\r\n    min: 6.5,\r\n    max: 9.6\r\n}\r\n\r\nexport const levels = [6.5, 7.0, 8.5, 9.5] // too-low, low, normal, good\r\n\r\n\r\n\r\n","export const firebaseConfig = {\r\n    apiKey: \"AIzaSyBLrODZWuYHlBeJIUwaNh6QDTkmhbxLcjE\",\r\n    authDomain: \"air-freshener-iot.firebaseapp.com\",\r\n    databaseURL: \"https://air-freshener-iot-default-rtdb.europe-west1.firebasedatabase.app\",\r\n    projectId: \"air-freshener-iot\",\r\n    storageBucket: \"air-freshener-iot.appspot.com\",\r\n    messagingSenderId: \"369342205741\",\r\n    appId: \"1:369342205741:web:d2ca55ee0fa251c5418da4\"\r\n};\r\n\r\nexport const email = 'labtorie@gmail.com'\r\n","import axios from \"axios\";\r\nimport {BASE_URL} from \"../config/network\";\r\nimport firebase from \"firebase\";\r\nimport {email} from \"../config/firebase\";\r\n\r\n\r\nconst API = axios.create({\r\n    baseURL: BASE_URL,\r\n    withCredentials: false\r\n})\r\n\r\nexport const getBatteryGraph = async () => {\r\n    return await API.get('data/battery.json')\r\n}\r\n\r\nexport const getTriggerGraph = async () => {\r\n    return await API.get('data/trigger.json')\r\n}\r\n\r\nexport const getSettings =  () => {\r\n    return API.get('settings.json').then(r=>r.data)\r\n}\r\n\r\nexport const setSettings = async (data) => {\r\n    const token = await firebase.auth().currentUser.getIdToken()\r\n    const prevSettings = await getSettings()\r\n    return API.put('settings.json?auth='+token, {...prevSettings, ...data})\r\n}\r\n\r\nexport const signIn = async (password) => {\r\n   return firebase.auth().signInWithEmailAndPassword(email, password)\r\n        .then((userCredential) => {\r\n            // Signed in\r\n            var user = userCredential.user;\r\n            // ...\r\n        })\r\n        .catch((error) => {\r\n            return error\r\n        });\r\n\r\n}\r\n\r\nexport const signOut = async () => {\r\n    return await firebase.auth().signOut()\r\n\r\n}\r\n\r\nexport const changePassword = async (password) => {\r\n    const user = firebase.auth().currentUser;\r\n\r\n    return user.updatePassword(password).then(function() {\r\n        // Update successful.\r\n    }).catch(function(error) {\r\n        return error\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","export const BASE_URL = `https://air-freshener-iot-default-rtdb.europe-west1.firebasedatabase.app/`\r\n\r\nexport const FETCH_INTERVAL = 5000\r\n","import moment from \"moment\";\r\n\r\nexport const spreadTriggersToDay = (pairs=[]) => {\r\n    let data = new Array(24).fill(0).map((_,index)=>({hour: index, value: 0}))\r\n    pairs.forEach(({time, value})=>{\r\n        const hour = getHour(time)\r\n        data[hour] = {...data[hour], value: data[hour].value+value}\r\n    })\r\n    return data\r\n}\r\n\r\nexport const getTotalPshicks = (pairs, unit='day') => {\r\n    const todayWakeUps = pairs.filter(({time})=>{\r\n        return moment(time).isSame(moment(), unit)\r\n    })\r\n    return todayWakeUps.reduce((total, {value})=>total+value,0)\r\n}\r\n\r\nconst getHour = (timestamp) => {\r\n    return +moment(timestamp).format('H')\r\n}\r\n","import React, {useEffect, useState} from 'react'\r\nimport moment from \"moment\";\r\nimport {getBatteryGraph, getSettings, getTriggerGraph, setSettings} from \"../api/api\";\r\nimport {getTotalPshicks, spreadTriggersToDay} from \"../utils\";\r\nimport {FETCH_INTERVAL} from \"../config/network\";\r\n\r\nconst contextShape = {\r\n    data: {\r\n        plots: {\r\n            voltage: {\r\n                data: []\r\n            },\r\n            activations: {\r\n                data: []\r\n            },\r\n        },\r\n        currentState: {\r\n            voltage: {\r\n                value: 0,\r\n                lastPush: moment()\r\n            },\r\n            recentActivity: {\r\n                day: 0,\r\n                week: 0,\r\n                month: 0,\r\n            }\r\n        },\r\n        settings: {\r\n            activeTime: 0,\r\n            sleepTime: 0,\r\n            sprayInterval: 0,\r\n        },\r\n    },\r\n    startService: ()=>{},\r\n    fetchData: async ()=>{},\r\n    fetchSettings: async ()=>{},\r\n    saveSettings: async ()=>{},\r\n    isFetching: true,\r\n}\r\nconst DataContext = React.createContext(contextShape)\r\n\r\nexport const useDataContext = () => {\r\n    const [data, setData] = useState(contextShape)\r\n    useEffect(()=>{\r\n        console.log(data)\r\n    }, [data])\r\n\r\n    const fetchData = async () => {\r\n        const {data: voltageData} = await getBatteryGraph()\r\n        const {data: activityData} = await getTriggerGraph()\r\n\r\n        const voltageArray = Object\r\n            .entries(voltageData || {})\r\n            .filter(([key])=>key!=='last_id')\r\n            .map(([key, value])=>({\r\n                ...value,\r\n                value: (value.value / 1000).toFixed(1),\r\n                time: value?.timestamp\r\n            }))\r\n        const {value: currentVoltage, time: lastPush}= voltageArray.slice(-1)[0]\r\n\r\n        const activityArray = Object\r\n            .entries(activityData|| {})\r\n            .filter(([key])=>key!=='last_id')\r\n            .map(([key, value])=>({\r\n                ...value,\r\n                time: value?.timestamp\r\n            }))\r\n        const dailyActivitySpread = spreadTriggersToDay(activityArray)\r\n        const activityDay = getTotalPshicks(activityArray, 'day')\r\n        const activityWeek = getTotalPshicks(activityArray, 'week')\r\n        const activityMonth = getTotalPshicks(activityArray, 'month')\r\n\r\n        setData(state=>({\r\n            ...state,\r\n            isFetching: false,\r\n            data: {\r\n                ...state.data,\r\n                plots: {\r\n                    voltage: {\r\n                        data: voltageArray\r\n                    },\r\n                    activations: {\r\n                        data: dailyActivitySpread\r\n                    },\r\n                },\r\n                currentState: {\r\n                    voltage: {\r\n                        value: currentVoltage,\r\n                        lastPush: lastPush\r\n                    },\r\n                    recentActivity: {\r\n                        day: activityDay,\r\n                        week: activityWeek,\r\n                        month: activityMonth,\r\n                    }\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    const fetchSettings = async () => {\r\n        const {activeTime, sleepTime} = await getSettings()\r\n        setData(state => ({\r\n            ...state,\r\n            data: {\r\n                ...state.data,\r\n                settings: {\r\n                    activeTime,\r\n                    sleepTime,\r\n                    sprayInterval: 0,\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    const saveSettings = async ({activeTime=0, sleepTime=0}) => {\r\n        await setSettings({\r\n            activeTime: Number(activeTime),\r\n            sleepTime: Number(sleepTime)\r\n        })\r\n    }\r\n\r\n    const startService = () => {\r\n        setInterval(()=>{\r\n            fetchData()\r\n        }, FETCH_INTERVAL)\r\n    }\r\n\r\n    return {...data, startService, fetchData, fetchSettings, saveSettings}\r\n}\r\n\r\nexport default DataContext\r\n","import React, {useContext} from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {\r\n    faBatteryEmpty, faBatteryFull,\r\n    faBatteryHalf,\r\n    faBatteryQuarter,\r\n    faBatteryThreeQuarters\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport moment from \"moment\";\r\nimport styles from './styles.module.css'\r\nimport {levels} from \"../../../config/battery\";\r\nimport DataContext from \"../../../contexts/dataContext\";\r\n\r\nconst Battery = () => {\r\n\r\n    const {data: {currentState: {voltage: {value, lastPush}}}} = useContext(DataContext)\r\n    const getIcon = (voltage) => {\r\n        if (voltage < levels[0]) return [faBatteryEmpty, '#eb3f33']\r\n        if (voltage < levels[1]) return [faBatteryQuarter, '#ffce5c']\r\n        if (voltage < levels[2]) return [faBatteryHalf, '#5fd393']\r\n        if (voltage < levels[3]) return [faBatteryThreeQuarters, '#5fd393']\r\n\r\n        return [faBatteryFull, '#5fd393']\r\n    }\r\n\r\n    const getDiff = () => {\r\n        const now = moment()\r\n        let unit = 'seconds'\r\n\r\n        const calcDiff = (unit='s') => now.diff(moment(lastPush), unit)\r\n\r\n        let diff = calcDiff('s')\r\n\r\n        if (diff >= 60) {\r\n            diff = calcDiff('m')\r\n            unit = 'minutes'\r\n            if (diff >= 60) {\r\n                diff = calcDiff('h')\r\n                unit = 'hours'\r\n                if (diff >= 24) {\r\n                    unit = 'days'\r\n                    diff = calcDiff('d')\r\n                }\r\n            }\r\n        }\r\n\r\n        return [diff, unit]\r\n    }\r\n\r\n\r\n    const icon = getIcon(value)\r\n\r\n    return <div className={styles.battery}>\r\n        <FontAwesomeIcon icon={icon[0]} color={icon[1]}/>\r\n        <div>\r\n            {value+'V'}\r\n        </div>\r\n        <div style={{color: '#888'}}>\r\n            {getDiff().join(' ')+' ago'}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Battery\r\n","import React from 'react'\r\nimport styles from './style.module.css'\r\nimport Battery from \"../Battery\";\r\n\r\nconst Header = () => {\r\n    return <div className={styles.bar}>\r\n        <div className={styles.barTitle}>\r\n            AirPshicker\r\n        </div>\r\n        <Battery/>\r\n    </div>\r\n}\r\nexport default Header\r\n","import React from 'react'\r\nimport ReactApexChart from 'react-apexcharts'\r\nimport moment from \"moment\";\r\nimport styles from './styles.module.css'\r\nimport {voltage} from \"../../config/battery\";\r\n\r\nconst BatteryGraph = ({data=[]}) => {\r\n\r\n    const options = {\r\n            colors: ['#5fd393'],\r\n            chart: {\r\n                type: 'area',\r\n                stacked: false,\r\n                height: 350,\r\n                zoom: {\r\n                    type: 'x',\r\n                    enabled: true,\r\n                    autoScaleYaxis: true\r\n                },\r\n                toolbar: {\r\n                    autoSelected: 'zoom',\r\n                    tools: {\r\n                        download: false,\r\n                        selection: true,\r\n                        zoom: true,\r\n                        zoomin: false,\r\n                        zoomout: false,\r\n                        pan: true,\r\n                        reset: true | '<img src=\"/static/icons/reset.png\" width=\"20\">',\r\n                        customIcons: []\r\n                    }\r\n                }\r\n            },\r\n            dataLabels: {\r\n                enabled: false\r\n            },\r\n            markers: {\r\n                size: 0,\r\n            },\r\n            title: {\r\n                text: 'Battery Voltage',\r\n                align: 'left',\r\n                style: {\r\n                    fontFamily: 'Montserrat, sans-serif',\r\n                    fontWeight: 700,\r\n                }\r\n            },\r\n            fill: {\r\n                colors: ['#5fd393'],\r\n            },\r\n            yaxis: {\r\n                max: voltage.max,\r\n                min: voltage.min,\r\n                type: 'numeric',\r\n                title: {\r\n                    text: 'Volts',\r\n                    style: {\r\n                        fontFamily: 'Montserrat, sans-serif',\r\n                        fontWeight: 500,\r\n                    }\r\n                },\r\n                labels: {\r\n                    formatter: (val) => val.toFixed(1),\r\n                    style: {\r\n                        fontFamily: 'Montserrat, sans-serif',\r\n                        fontWeight: 500,\r\n                    }\r\n                },\r\n\r\n            },\r\n            xaxis: {\r\n                type: 'numeric',\r\n                categories: data.map(({time})=>time),\r\n                labels: {\r\n                    formatter: function (val) {\r\n                        return moment(val).format('DD.MM HH:mm');\r\n                    },\r\n                    style: {\r\n                        fontFamily: 'Montserrat, sans-serif',\r\n                        fontWeight: 500,\r\n                    }\r\n                },\r\n            },\r\n            tooltip: {\r\n                shared: false,\r\n                style: {\r\n                    fontFamily: 'Montserrat, sans-serif',\r\n                    fontWeight: 500,\r\n                }\r\n            }\r\n        }\r\n\r\n    const series = [{\r\n        name: 'Battery',\r\n        data: data.map(({value, time}, index)=>value)\r\n    }]\r\n\r\n    return <div className={styles.graphContainer}>\r\n        <ReactApexChart options={options} series={series} type=\"area\" height={350} style={{width: '100%'}}/>\r\n    </div>\r\n}\r\n\r\n\r\nexport default BatteryGraph\r\n","import React from 'react'\r\nimport styles from './styles.module.css'\r\nimport ApexChart from 'react-apexcharts'\r\n\r\nconst TriggerGraph = ({data = []}) => {\r\n\r\n    const series = [{data: data.map(({value}) => value), name: 'Activations'}]\r\n\r\n    const options = {\r\n        chart: {\r\n            width: 380,\r\n            type: 'radar',\r\n            toolbar: {\r\n                tools: {download: false}\r\n            },\r\n        },\r\n        title: {\r\n            text: 'Daily usage',\r\n            align: 'left',\r\n            style: {\r\n                fontFamily: 'Montserrat, sans-serif',\r\n                fontWeight: 700,\r\n            }\r\n        },\r\n        plotOptions: {\r\n            radar: {\r\n                polygons: {\r\n                    strokeColor: 'transparent',\r\n                    fill: {colors: ['#fff']}\r\n                },\r\n\r\n            }\r\n        },\r\n        labels: data.map(({hour}) => hour),\r\n        fill: {\r\n            opacity: .4\r\n        },\r\n        stroke: {\r\n            show: false,\r\n            width: 2,\r\n            colors: [],\r\n            dashArray: 0\r\n        },\r\n        markers: {\r\n            size: 3\r\n        },\r\n        yaxis: {\r\n            show: false,\r\n            labels: {\r\n                formatter: val => val+' times',\r\n\r\n            }\r\n        },\r\n        xaxis: {\r\n            show: true,\r\n            categories: data.map(({hour}) => hour+':00'),\r\n            labels: {\r\n                show: true,\r\n                style: {\r\n                    fontFamily: 'Montserrat, sans-serif',\r\n                    fontWeight: 500,\r\n                }\r\n            },\r\n\r\n        },\r\n        legend: {\r\n            show: false\r\n        },\r\n        tooltip: {\r\n            style: {\r\n                fontFamily: 'Montserrat, sans-serif',\r\n                fontWeight: 500,\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return <div className={styles.graphContainer}>\r\n        <ApexChart type={'radar'} options={options} series={series} height={350} style={{width: '100%'}}/>\r\n    </div>\r\n}\r\n\r\nexport default TriggerGraph\r\n","import React, {useContext, useEffect, useState} from 'react'\r\nimport s from './styles.module.css'\r\nimport cn from \"classnames\";\r\nimport {changePassword, getSettings, setSettings, signIn, signOut} from \"../../../api/api\";\r\nimport DataContext from \"../../../contexts/dataContext\";\r\nimport {FirebaseAuthConsumer} from \"@react-firebase/auth\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {faKey, faSignOutAlt, faTimes} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Settings = ({isVisible, onClose=()=>{}, user, isSignedIn=false}) => {\r\n\r\n    const {data: {settings}, fetchSettings, saveSettings} = useContext(DataContext)\r\n    const [_settings, _setSettings] = useState(settings)\r\n    const [changePasswordState, setChangePasswordState] = useState(false)\r\n    const [password, setPassword] = useState('')\r\n    const [passwordError, setPasswordError] = useState(false)\r\n    const [newPasswordError, setNewPasswordError] = useState(false)\r\n    const [newPasswords, setNewPasswords] = useState({one: '', two: ''})\r\n\r\n    const onPasswordChange = async () => {\r\n        if (newPasswords.one.length < 8 || newPasswords.two.length < 8 )\r\n            return setNewPasswordError('Must be at least 8 characters')\r\n        if (newPasswords.one !== newPasswords.two)\r\n            return setNewPasswordError('Passwords don\\'t match')\r\n        const resp = await changePassword(newPasswords.one)\r\n        if (resp?.message)\r\n            return setNewPasswordError(resp.message)\r\n        setNewPasswordError(false)\r\n        setChangePasswordState(false)\r\n\r\n    }\r\n\r\n    const onSignIn = async () => {\r\n        const resp = await signIn(password)\r\n        if (resp?.message) {\r\n            setPasswordError(resp.message)\r\n        } else {\r\n            setPasswordError(false)\r\n        }\r\n        setPassword('')\r\n    }\r\n\r\n    const onSave = async () => {\r\n        await saveSettings(_settings)\r\n        onClose()\r\n    }\r\n\r\n    useEffect(()=>{\r\n        fetchSettings()\r\n        _setSettings(settings)\r\n    },[isVisible])\r\n\r\n    if (changePasswordState) return <div className={cn(s.wrapper, isVisible && s.show)}>\r\n        <div className={s.settingsHeader}>\r\n            <h1>Change password</h1>\r\n            <div className={s.controllers} onClick={()=>setChangePasswordState(false)}>\r\n                <div className={s.signOut}>\r\n                <FontAwesomeIcon icon={faTimes}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className={s.section}>\r\n            <div className={s.inputArea}><input value={newPasswords.one}\r\n                      type={'password'}\r\n                      style={{flex: 1}}\r\n                      placeholder={'New password'}\r\n                      onChange={e => setNewPasswords(prev => ({...prev, one: e.target.value}))}\r\n            /></div>\r\n        </div>\r\n        <div className={s.section}>\r\n            <div className={s.inputArea}><input value={newPasswords.two}\r\n                      type={'password'}\r\n                      style={{flex: 1}}\r\n                      placeholder={'Repeat new password'}\r\n                      onChange={e => setNewPasswords(prev => ({...prev, two: e.target.value}))}\r\n            /></div>\r\n        </div>\r\n        <button onClick={onPasswordChange}>Change</button>\r\n        {newPasswordError && <span className={s.error}>{newPasswordError}</span>}\r\n    </div>\r\n\r\n    if (!isSignedIn) return <div className={cn(s.wrapper, isVisible && s.show)}>\r\n        <h1>What's the password?</h1>\r\n        <div className={s.section}><span>You need to sign in to modify settings</span>\r\n            <div className={s.inputArea}>\r\n                <input value={password}\r\n                       type={'password'}\r\n                       style={{flex: 1}}\r\n                       placeholder={'Password'}\r\n                       onChange={e=>setPassword(e.target.value)}\r\n                />\r\n            </div>\r\n            <button onClick={onSignIn}>Sign in</button>\r\n            {passwordError && <span className={s.error}>{passwordError}</span>}\r\n            <div onClick={onClose} className={s.goBack}>{'< Back to home screen'}</div>\r\n        </div>\r\n    </div>\r\n\r\n    return <div className={cn(s.wrapper, isVisible && s.show)}>\r\n            <div className={s.settingsHeader}>\r\n                <h1>Settings</h1>\r\n                <div className={s.controllers}>\r\n                <div className={s.signOut} onClick={()=>setChangePasswordState(true)}>\r\n                    <FontAwesomeIcon icon={faKey} color={'#888'}/>\r\n                </div>\r\n                <div className={s.signOut} onClick={signOut}>\r\n                    <FontAwesomeIcon icon={faSignOutAlt} color={'#888'}/>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        <div className={s.section}><span>Waiting time before sleep</span>\r\n            <div className={s.inputArea}>\r\n                <input value={_settings.activeTime}\r\n                       onChange={e=>_setSettings(prev=>({...prev, activeTime: e.target.value}))}\r\n                       type={'number'}/>seconds</div>\r\n        </div>\r\n        <div className={s.section}><span>Sleep time</span>\r\n            <div className={s.inputArea}>\r\n                <input value={_settings.sleepTime}\r\n                       onChange={e=>_setSettings(prev=>({...prev, sleepTime: e.target.value}))}\r\n                       type={'number'}/>seconds</div>\r\n        </div>\r\n        <div className={s.section}><span>Spray interval</span>\r\n            <div className={s.inputArea}><input type={'number'} disabled/>minutes</div>\r\n        </div>\r\n        <button onClick={onSave}>Apply changes</button>\r\n        <div onClick={onClose} className={s.goBack}>{'< Back to home screen'}</div>\r\n        </div>\r\n\r\n}\r\n\r\n\r\nexport default Settings\r\n","import React, {useContext, useEffect, useState} from 'react'\r\nimport styles from './styles.module.css'\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faCog} from \"@fortawesome/free-solid-svg-icons\";\r\nimport BatteryGraph from \"../../Graph\";\r\nimport TriggerGraph from \"../../Graph/TriggerGraph\";\r\nimport classNames from \"classnames\";\r\nimport Settings from \"../Settings\";\r\nimport {levels} from \"../../../config/battery\";\r\nimport DataContext from \"../../../contexts/dataContext\";\r\nimport {FirebaseAuthConsumer} from \"@react-firebase/auth\";\r\n\r\n\r\nconst Main = () => {\r\n    const [displayModal, setDisplayModal] = useState(false);\r\n\r\n    const {data, startService} = useContext(DataContext)\r\n\r\n    useEffect(()=>{\r\n        startService()\r\n    },[])\r\n\r\n\r\n    const getBatteryStatus = (voltage) => {\r\n        if (voltage < levels[0]) return 'Too low. Needs charging'\r\n        if (voltage < levels[1]) return 'Running low'\r\n        if (voltage < levels[2]) return 'Enough to work'\r\n        if (voltage < levels[3]) return 'Good'\r\n\r\n        return 'Fully charged'\r\n    }\r\n\r\n\r\n    const totalGrid = <div className={styles.totalGrid}>\r\n        <div className={styles.totalRow}>\r\n            <div className={styles.totalTitle}>Today</div>\r\n            <div className={styles.totalValue}>{data.currentState?.recentActivity?.day}</div>\r\n        </div>\r\n        <div className={styles.totalRow}>\r\n            <div className={styles.totalTitle}>Week</div>\r\n            <div className={styles.totalValue}>{data.currentState?.recentActivity?.week}</div>\r\n        </div>\r\n        <div className={styles.totalRow}>\r\n            <div className={styles.totalTitle}>Month</div>\r\n            <div className={styles.totalValue}>{data.currentState?.recentActivity?.month}</div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    return <FirebaseAuthConsumer>{({isSignedIn, user, providerId }) => (\r\n        <>\r\n            <Settings isSignedIn={isSignedIn} user={user} isVisible={displayModal} onClose={() => setDisplayModal(false)}/>\r\n            <div className={styles.mainGrid}>\r\n                <Card mainComponent={\r\n                    <div className={styles.totalRow}>\r\n                        <div className={styles.totalTitle}>Volts</div>\r\n                        <div className={styles.totalValue}>{data.currentState?.voltage?.value || '0.0'}</div>\r\n                    </div>\r\n                } bottomText={getBatteryStatus(data.currentState?.voltage?.value)} gridArea={'volt'}/>\r\n                <Card gridArea={'today'} mainComponent={totalGrid} bottomText={'Activations'}/>\r\n                <Card gridArea={'sets'} mainComponent={<FontAwesomeIcon icon={faCog}/>} bottomText={'Settings'}\r\n                      onCLick={() => setDisplayModal(p => !p)}/>\r\n                <GraphCard gridArea={'graph1'}>\r\n                    <BatteryGraph data={data.plots?.voltage?.data}/>\r\n                </GraphCard>\r\n                <GraphCard gridArea={'graph2'}>\r\n                    <TriggerGraph data={data.plots?.activations?.data}/>\r\n                </GraphCard>\r\n            </div>\r\n        </>\r\n    )}\r\n\r\n    </FirebaseAuthConsumer>\r\n}\r\n\r\nconst Card = ({gridArea='', mainComponent='', bottomText='', onCLick}) => {\r\n\r\n    return <div className={classNames(styles.card, onCLick && styles.clickable)} onClick={()=>{onCLick && onCLick()}} style={{gridArea}}>\r\n        <div className={styles.cardMainContent}>{mainComponent}</div>\r\n        <div className={styles.cardBottomText}>{bottomText}</div>\r\n    </div>\r\n}\r\n\r\nconst GraphCard = ({gridArea='', ...props}) => {\r\n    return <div className={styles.card} style={{gridArea}}>\r\n        {props.children}\r\n    </div>\r\n}\r\n\r\nexport default Main\r\n","import Header from \"./components/common/Header\";\r\nimport firebase from 'firebase'\r\nimport React, {useEffect} from \"react\";\r\nimport styles from './styles.module.css'\r\nimport Main from \"./components/screens/Main\";\r\nimport DataContext, {useDataContext} from \"./contexts/dataContext\";\r\nimport {firebaseConfig} from \"./config/firebase\";\r\nimport {FirebaseAuthProvider} from \"@react-firebase/auth\";\r\n\r\nfunction App() {\r\n\r\n  const appData = useDataContext()\r\n\r\n  useEffect(()=>{\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp({});\r\n    }else {\r\n      firebase.app(); // if already initialized, use that one\r\n    }\r\n    appData.fetchData()\r\n  }, [])\r\n\r\n\r\n  return <FirebaseAuthProvider firebase={firebase} {...firebaseConfig}>\r\n    <DataContext.Provider value={appData}>\r\n      <div className={styles.loadingOverlay} style={{opacity: Number(appData.isFetching)}}/>\r\n      <div className={styles.contentWrapper}>\r\n        <div className={styles.body}>\r\n          <Header/>\r\n          <Main/>\r\n        </div>\r\n      </div>\r\n    </DataContext.Provider>\r\n  </FirebaseAuthProvider>\r\n}\r\n\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"graphContainer\":\"styles_graphContainer__rvnP9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loadingOverlay\":\"styles_loadingOverlay__25Hxt\",\"body\":\"styles_body__32Flv\",\"contentWrapper\":\"styles_contentWrapper__fzvAO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bar\":\"style_bar__3UGFG\",\"barTitle\":\"style_barTitle__2GbdM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"battery\":\"styles_battery__b2nck\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3un5n\",\"wrapper\":\"styles_wrapper__2GKub\",\"show\":\"styles_show__eYaCF\",\"section\":\"styles_section__k8e-n\",\"inputArea\":\"styles_inputArea__2nZMU\",\"settingsHeader\":\"styles_settingsHeader__2DDi6\",\"controllers\":\"styles_controllers__2mTw3\",\"signOut\":\"styles_signOut__34wIp\",\"goBack\":\"styles_goBack__3jVWD\",\"error\":\"styles_error__2gPIw\"};"],"sourceRoot":""}