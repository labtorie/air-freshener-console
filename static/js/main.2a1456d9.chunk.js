(this["webpackJsonpair-freshener"]=this["webpackJsonpair-freshener"]||[]).push([[0],{10:function(t,e,n){t.exports={mainGrid:"styles_mainGrid__1mR3b",card:"styles_card__4jqsg",cardMainContent:"styles_cardMainContent__16FlH",cardBottomText:"styles_cardBottomText__2q2-n",clickable:"styles_clickable__14Tnt"}},14:function(t,e,n){t.exports={graphContainer:"styles_graphContainer__rvnP9"}},17:function(t,e,n){t.exports={bar:"style_bar__3UGFG",barTitle:"style_barTitle__2GbdM"}},29:function(t,e,n){t.exports={battery:"styles_battery__b2nck"}},30:function(t,e,n){t.exports={background:"styles_background__2Fc5s",graphs:"styles_graphs__ANjRV",body:"styles_body__32Flv"}},37:function(t,e,n){},39:function(t,e,n){},64:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n.n(a),c=n(27),i=n.n(c),o=(n(37),n(6)),s=n.n(o),u=n(3),l=n(8),d=n(4),f=(n(39),n(17)),b=n.n(f),j=n(12),m=n(9),p=n(28),v=n.n(p).a.create({baseURL:"https://air-freshener-iot-default-rtdb.europe-west1.firebasedatabase.app/test2/",withCredentials:!1}),h=function(){return v.get("battery.json")},O=function(){return v.get("trigger.json")},x=n(7),g=n.n(x),y=n(29),_=n.n(y),w=n(0),k=function(){var t,e=Object(a.useState)({percentage:100,lastFetch:g()()}),n=Object(d.a)(e,2),r=n[0],c=n[1],i=function(){var t=Object(l.a)(s.a.mark((function t(){var e,n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:e=t.sent,n=e.data,a=Object.entries(n).filter((function(t){return"last_id"!==Object(d.a)(t,1)[0]})).map((function(t){var e=Object(d.a)(t,2),n=(e[0],e[1]);return Object(u.a)(Object(u.a)({},n),{},{time:null===n||void 0===n?void 0:n.timestamp})})),r=a.slice(-1)[0],c({percentage:(null===r||void 0===r?void 0:r.value)||0,lastFetch:(null===r||void 0===r?void 0:r.time)||g()()});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=(t=r.percentage)<10?[m.a,"#eb3f33"]:t<25?[m.d,"#ffce5c"]:t<50?[m.c,"#5fd393"]:t<75?[m.e,"#5fd393"]:t<=100?[m.b,"#5fd393"]:void 0;return Object(a.useEffect)((function(){i()}),[]),Object(w.jsxs)("div",{className:_.a.battery,onDoubleClick:function(){var t=Math.round(100*Math.random());c((function(e){return Object(u.a)(Object(u.a)({},e),{},{percentage:t})}))},children:[Object(w.jsx)(j.a,{icon:o[0],color:o[1]}),Object(w.jsx)("div",{children:r.percentage+"%"}),Object(w.jsx)("div",{style:{color:"#888"},children:function(){var t=g()(),e="seconds",n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"s";return t.diff(g()(r.lastFetch),e)},a=n("s");return a>=60&&(e="minutes",(a=n("m"))>=60&&(e="hours",(a=n("h"))>=24&&(e="days",a=n("d")))),[a,e]}().join(" ")+" ago"})]})},C=function(){return Object(w.jsxs)("div",{className:b.a.bar,children:[Object(w.jsx)("div",{className:b.a.barTitle,children:"AirPshicker"}),Object(w.jsx)(k,{})]})},A=n(13),T=n.n(A),F=n(14),N=n.n(F),M=function(t){var e=t.data,n=void 0===e?[]:e,a={colors:["#00ff00"],chart:{type:"area",stacked:!1,height:350,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom",tools:{download:!1,selection:!0,zoom:!0,zoomin:!1,zoomout:!1,pan:!0,reset:1,customIcons:[]}}},dataLabels:{enabled:!1},markers:{size:0},title:{text:"Battery Percentage",align:"left"},fill:{colors:["#00ff00"]},yaxis:{max:100,type:"numeric",min:0,title:{text:"Battery"},labels:{formatter:function(t){return t+"%"}}},xaxis:{type:"numeric",categories:n.map((function(t){return t.time})),labels:{formatter:function(t){return g()(t).format("DD/MM HH:mm")}}},tooltip:{shared:!1}},r=[{name:"Battery",data:n.map((function(t,e){var n=t.value;t.time;return n}))}];return Object(w.jsx)("div",{className:N.a.graphContainer,children:Object(w.jsx)(T.a,{options:a,series:r,type:"area",height:350,style:{width:"100%"}})})},S=(n.p,n(30)),z=n.n(S),B=function(t){var e=t.data,n=void 0===e?[]:e,a=[{data:n.map((function(t){return t.value})),name:"Usage"}],r={chart:{width:380,type:"radar"},title:{text:"Daily usage",align:"left"},plotOptions:{radar:{polygons:{strokeColor:"transparent",fill:{colors:["#fff"]}}}},labels:n.map((function(t){return t.hour})),fill:{opacity:.4},stroke:{show:!1,width:2,colors:[],dashArray:0},markers:{size:0},yaxis:{show:!1},xaxis:{show:!0,categories:n.map((function(t){return t.hour+":00"})),labels:{show:!0,style:{colors:["#161616"],fontSize:"11px",fontFamily:"Arial"}}},legend:{show:!1}};return Object(w.jsx)("div",{className:N.a.graphContainer,children:Object(w.jsx)(T.a,{type:"radar",options:r,series:a,height:350,style:{width:"100%"}})})},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Array(24).fill(0).map((function(t,e){return{hour:e,value:0}}));return t.forEach((function(t){var n=t.time,a=(t.value,G(n));e[a]=Object(u.a)(Object(u.a)({},e[a]),{},{value:e[a].value+1})})),e},G=function(t){return+g()(t).format("H")},L=n(32),D=n(10),P=n.n(D),H=n(31),I=n.n(H),R=function(t){var e=t.gridArea,n=void 0===e?"":e,a=t.mainComponent,r=void 0===a?"":a,c=t.bottomText,i=void 0===c?"":c,o=t.onCLick;return Object(w.jsxs)("div",{className:I()(P.a.card,o&&P.a.clickable),onClick:function(){o&&o()},style:{gridArea:n},children:[Object(w.jsx)("div",{className:P.a.cardMainContent,children:r}),Object(w.jsx)("div",{className:P.a.cardBottomText,children:i})]})},U=function(t){var e=t.gridArea,n=void 0===e?"":e,a=Object(L.a)(t,["gridArea"]);return Object(w.jsx)("div",{className:P.a.card,style:{gridArea:n},children:a.children})},q=function(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)([]),i=Object(d.a)(c,2),o=i[0],f=i[1],b=function(){var t=Object(l.a)(s.a.mark((function t(){var e,n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:e=t.sent,n=e.data,a=Object.entries(n).filter((function(t){return"last_id"!==Object(d.a)(t,1)[0]})).map((function(t){var e=Object(d.a)(t,2),n=(e[0],e[1]);return Object(u.a)(Object(u.a)({},n),{},{time:null===n||void 0===n?void 0:n.timestamp})})),r=E(a),f(r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=Object(l.a)(s.a.mark((function t(){var e,n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:e=t.sent,n=e.data,a=Object.entries(n).filter((function(t){return"last_id"!==Object(d.a)(t,1)[0]})).map((function(t){var e=Object(d.a)(t,2),n=(e[0],e[1]);return Object(u.a)(Object(u.a)({},n),{},{time:null===n||void 0===n?void 0:n.timestamp})})),r(a);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){p(),b()}),[]),Object(w.jsxs)("div",{className:P.a.mainGrid,children:[Object(w.jsx)(R,{mainComponent:"7.3V",bottomText:"Enough to work (Mock)",gridArea:"volt"}),Object(w.jsx)(R,{gridArea:"today",mainComponent:"1234",bottomText:"Activations today. Eww, stinky (Mock)"}),Object(w.jsx)(R,{gridArea:"sets",mainComponent:Object(w.jsx)(j.a,{icon:m.f}),bottomText:"Settings",onCLick:function(){}}),Object(w.jsx)(U,{gridArea:"graph1",children:Object(w.jsx)(M,{data:n})}),Object(w.jsx)(U,{gridArea:"graph2",children:Object(w.jsx)(B,{data:o})})]})};var J=function(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=(e[0],e[1]),r=Object(a.useState)([]),c=Object(d.a)(r,2),i=(c[0],c[1]),o=function(){var t=Object(l.a)(s.a.mark((function t(){var e,n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:e=t.sent,n=e.data,a=Object.entries(n).filter((function(t){return"last_id"!==Object(d.a)(t,1)[0]})).map((function(t){var e=Object(d.a)(t,2),n=(e[0],e[1]);return Object(u.a)(Object(u.a)({},n),{},{time:null===n||void 0===n?void 0:n.timestamp})})),r=E(a),i(r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(l.a)(s.a.mark((function t(){var e,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:e=t.sent,a=e.data,r=Object.entries(a).filter((function(t){return"last_id"!==Object(d.a)(t,1)[0]})).map((function(t){var e=Object(d.a)(t,2),n=(e[0],e[1]);return Object(u.a)(Object(u.a)({},n),{},{time:null===n||void 0===n?void 0:n.timestamp})})),n(r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){f(),o()}),[]),Object(w.jsxs)("div",{className:z.a.body,children:[Object(w.jsx)(C,{}),Object(w.jsx)(q,{})]})},V=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(J,{})}),document.getElementById("root")),V()}},[[64,1,2]]]);
//# sourceMappingURL=main.2a1456d9.chunk.js.map