(this["webpackJsonpair-freshener"]=this["webpackJsonpair-freshener"]||[]).push([[0],{12:function(t,e,a){t.exports={graphContainer:"styles_graphContainer__rvnP9"}},15:function(t,e,a){t.exports={bar:"style_bar__3UGFG",barTitle:"style_barTitle__2GbdM"}},16:function(t,e,a){t.exports={background:"styles_background__2Fc5s",graphs:"styles_graphs__ANjRV",body:"styles_body__32Flv"}},29:function(t,e,a){t.exports={battery:"styles_battery__b2nck"}},34:function(t,e,a){},36:function(t,e,a){},61:function(t,e,a){"use strict";a.r(e);var n=a(2),r=a.n(n),c=a(26),i=a.n(c),s=(a(34),a(7)),o=a.n(s),u=a(4),l=a(9),f=a(5),d=(a(36),a(15)),b=a.n(d),j=a(27),p=a(8),h=a(28),m=a.n(h).a.create({baseURL:"https://air-freshener-iot-default-rtdb.europe-west1.firebasedatabase.app/test2/",withCredentials:!1}),v=function(){return m.get("battery.json")},O=a(6),x=a.n(O),y=a(29),g=a.n(y),_=a(1),w=function(){var t,e=Object(n.useState)({percentage:100,lastFetch:x()()}),a=Object(f.a)(e,2),r=a[0],c=a[1],i=function(){var t=Object(l.a)(o.a.mark((function t(){var e,a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:e=t.sent,a=e.data,n=Object.entries(a).filter((function(t){return"last_id"!==Object(f.a)(t,1)[0]})).map((function(t){var e=Object(f.a)(t,2),a=(e[0],e[1]);return Object(u.a)(Object(u.a)({},a),{},{time:null===a||void 0===a?void 0:a.timestamp})})),r=n.slice(-1)[0],c({percentage:(null===r||void 0===r?void 0:r.value)||0,lastFetch:(null===r||void 0===r?void 0:r.time)||x()()});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=(t=r.percentage)<10?[p.a,"#eb3f33"]:t<25?[p.d,"#ffce5c"]:t<50?[p.c,"#5fd393"]:t<75?[p.e,"#5fd393"]:t<=100?[p.b,"#5fd393"]:void 0;return Object(n.useEffect)((function(){i()}),[]),Object(_.jsxs)("div",{className:g.a.battery,onDoubleClick:function(){var t=Math.round(100*Math.random());c((function(e){return Object(u.a)(Object(u.a)({},e),{},{percentage:t})}))},children:[Object(_.jsx)(j.a,{icon:s[0],color:s[1]}),Object(_.jsx)("div",{children:r.percentage+"%"}),Object(_.jsx)("div",{style:{color:"#888"},children:function(){var t=x()(),e="seconds",a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"s";return t.diff(x()(r.lastFetch),e)},n=a("s");return n>=60&&(e="minutes",(n=a("m"))>=60&&(e="hours",(n=a("h"))>=24&&(e="days",n=a("d")))),[n,e]}().join(" ")+" ago"})]})},k=function(){return Object(_.jsxs)("div",{className:b.a.bar,children:[Object(_.jsxs)("div",{className:b.a.barTitle,children:[Object(_.jsx)("b",{children:"Air"}),"App"]}),Object(_.jsx)(w,{})]})},F=a(11),C=a.n(F),z=a(12),N=a.n(z),S=function(t){var e=t.data,a=void 0===e?[]:e,n={colors:["#00ff00"],chart:{type:"area",stacked:!1,height:350,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom",tools:{download:!1,selection:!0,zoom:!0,zoomin:!1,zoomout:!1,pan:!0,reset:1,customIcons:[]}}},dataLabels:{enabled:!1},markers:{size:0},title:{text:"Battery Percentage",align:"left"},fill:{colors:["#00ff00"]},yaxis:{max:100,type:"numeric",min:0,title:{text:"Battery"},labels:{formatter:function(t){return t+"%"}}},xaxis:{type:"numeric",categories:a.map((function(t){return t.time})),labels:{formatter:function(t){return x()(t).format("DD/MM HH:mm")}}},tooltip:{shared:!1}},r=[{name:"Battery",data:a.map((function(t,e){var a=t.value;t.time;return a}))}];return Object(_.jsx)("div",{className:N.a.graphContainer,children:Object(_.jsx)(C.a,{options:n,series:r,type:"area",height:350,style:{width:"100%"}})})},A=(a.p,a(16)),M=a.n(A),B=function(t){var e=t.data,a=void 0===e?[]:e,n=[{data:a.map((function(t){return t.value})),name:"Usage"}],r={chart:{width:380,type:"radar"},title:{text:"Daily usage",align:"left"},plotOptions:{radar:{polygons:{strokeColor:"transparent",fill:{colors:["#fff"]}}}},labels:a.map((function(t){return t.hour})),fill:{opacity:.4},stroke:{show:!1,width:2,colors:[],dashArray:0},markers:{size:0},yaxis:{show:!1},xaxis:{show:!0,categories:a.map((function(t){return t.hour+":00"})),labels:{show:!0,style:{colors:["#161616"],fontSize:"11px",fontFamily:"Arial"}}},legend:{show:!1}};return Object(_.jsx)("div",{className:N.a.graphContainer,children:Object(_.jsx)(C.a,{type:"radar",options:r,series:n,height:350,style:{width:"100%"}})})},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Array(24).fill(0).map((function(t,e){return{hour:e,value:0}}));return t.forEach((function(t){var a=t.time,n=(t.value,T(a));e[n]=Object(u.a)(Object(u.a)({},e[n]),{},{value:e[n].value+1})})),e},T=function(t){return+x()(t).format("H")};var E=function(){var t=Object(n.useState)([]),e=Object(f.a)(t,2),a=e[0],r=e[1],c=Object(n.useState)([]),i=Object(f.a)(c,2),s=i[0],d=i[1],b=function(){var t=Object(l.a)(o.a.mark((function t(){var e,a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.get("trigger.json");case 2:e=t.sent,a=e.data,n=Object.entries(a).filter((function(t){return"last_id"!==Object(f.a)(t,1)[0]})).map((function(t){var e=Object(f.a)(t,2),a=(e[0],e[1]);return Object(u.a)(Object(u.a)({},a),{},{time:null===a||void 0===a?void 0:a.timestamp})})),r=D(n),d(r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=Object(l.a)(o.a.mark((function t(){var e,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:e=t.sent,a=e.data,n=Object.entries(a).filter((function(t){return"last_id"!==Object(f.a)(t,1)[0]})).map((function(t){var e=Object(f.a)(t,2),a=(e[0],e[1]);return Object(u.a)(Object(u.a)({},a),{},{time:null===a||void 0===a?void 0:a.timestamp})})),r(n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){j(),b()}),[]),Object(_.jsxs)("div",{className:M.a.body,children:[Object(_.jsx)(k,{}),Object(_.jsxs)("div",{className:M.a.graphs,children:[Object(_.jsx)(S,{data:a}),Object(_.jsx)(B,{data:s})]})]})},L=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))};i.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(E,{})}),document.getElementById("root")),L()}},[[61,1,2]]]);
//# sourceMappingURL=main.b14b2bb8.chunk.js.map